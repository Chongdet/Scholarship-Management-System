{% extends "layouts/base.html" %}

{% block content %}
<div class="min-h-screen bg-sky-50 pb-12 pt-4">
    <div class="max-w-6xl mx-auto px-4">
        
        <div class="flex items-center gap-2 mb-6 text-blue-900">
            <a href="/student/dashboard" class="hover:text-yellow-500 font-bold flex items-center transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" /></svg>
                ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
            </a>
            <span class="text-gray-400">></span>
            <span class="text-gray-600 font-medium">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</span>
        </div>

        <form action="" method="POST" class="space-y-6">
            
            <div class="bg-white p-8 rounded-2xl shadow-md border-t-4 border-yellow-400">
                <h2 class="text-2xl font-bold mb-6 text-blue-900 border-b border-blue-100 pb-3">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Ç‡∏≠‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-8 text-gray-700">
                    <div class="flex items-center gap-4">
                        <label class="font-bold text-blue-900 w-24">‡∏ä‡∏∑‡πà‡∏≠ - ‡∏™‡∏Å‡∏∏‡∏• :</label>
                        <input type="text" name="name" value="{{ student.name | default('') }}" class="flex-1 px-3 py-2 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200" readonly>
                    </div>
                    <div class="flex items-center gap-4">
                        <label class="font-bold text-blue-900 w-24">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ :</label>
                        <input type="text" value="{{ student.student_id | default('') }}" class="flex-1 px-3 py-2 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200" readonly>
                    </div>
                    <div class="flex items-center gap-4">
                        <label class="font-bold text-blue-900 w-24">‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î :</label>
                        <input type="text" name="faculty" value="{{ student.faculty | default('') }}" class="flex-1 px-3 py-2 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200" readonly>
                    </div>
                    <div class="flex items-center gap-4">
                        <label class="font-bold text-blue-900 w-24">‡∏≠‡∏µ‡πÄ‡∏°‡∏• :</label>
                        <input type="email" name="email" value="{{ student.email | default('') }}" class="flex-1 px-3 py-2 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200" readonly>
                    </div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                <h3 class="text-lg font-bold mb-4 text-blue-900 border-b border-blue-50 pb-2">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏ô</h3>
                <div class="overflow-x-auto rounded-lg border border-gray-200">
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-blue-900 uppercase bg-blue-50 border-b border-blue-100">
                            <tr>
                                <th class="px-4 py-3">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
                                <th class="px-4 py-3">‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</th>
                                <th class="px-4 py-3">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                                <th class="px-4 py-3">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≠‡∏ö</th>
                                <th class="px-4 py-3">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                <th class="px-4 py-3">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b hover:bg-gray-50">
                                <td colspan="6" class="px-4 py-8 text-center text-gray-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏ô</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mt-4 flex justify-end gap-2">
                    <button type="button" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors">< ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
                    <button type="button" class="bg-blue-100 hover:bg-blue-200 text-blue-800 px-4 py-2 rounded-lg text-sm font-bold transition-colors">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ></button>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                <h3 class="text-lg font-bold mb-4 text-blue-900 border-b border-blue-50 pb-2">1. ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</label>
                        <input type="text" name="citizen_id" value="{{ student.citizen_id | default('') }}" class="w-full px-3 py-2 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200" readonly>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</label>
                        <input type="text" name="mobile" value="{{ student.mobile | default('') }}" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Facebook</label>
                        <input type="text" name="facebook" value="{{ student.facebook | default('') }}" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Line ID</label>
                        <input type="text" name="line_id" value="{{ student.line_id | default('') }}" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                    </div>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≤‡∏°‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô</label>
                        <textarea name="address_domicile" rows="2" class="w-full px-3 py-2 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200" readonly>{{ student.address_domicile | default('') }}</textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏´‡∏≠‡∏û‡∏±‡∏Å/‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏ä‡πà‡∏≤)</label>
                        <textarea name="address_current" rows="2" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>{{ student.address_current | default('') }}</textarea>
                    </div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                <h3 class="text-lg font-bold mb-4 text-blue-900 border-b border-blue-50 pb-2">2. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ‡∏ó‡∏µ‡πà</label>
                    <input type="text" name="year" value="{{ student.year | default('') }}" class="w-full px-3 py-2 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200" readonly>
                </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏™‡∏∞‡∏™‡∏° (GPAX)</label>
                        <input type="number" step="0.01" name="gpax" value="{{ student.gpax | default('') }}" class="w-full px-3 py-2 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200" readonly>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤</label>
                        <input type="text" name="advisor_name" value="{{ student.advisor_name | default('') }}" class="w-full px-3 py-2 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed border-gray-200" readonly>
                    </div>
                </div>
                <div class="mt-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ú‡∏¥‡∏î‡∏ó‡∏≤‡∏á‡∏ß‡∏¥‡∏ô‡∏±‡∏¢‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label>
                    <div class="flex gap-6">
                        <label class="flex items-center gap-2 cursor-not-allowed text-gray-500">
                            <input type="radio" name="disciplinary_status" value="‡πÑ‡∏°‡πà‡∏°‡∏µ" {% if student.disciplinary_status == '‡πÑ‡∏°‡πà‡∏°‡∏µ' or not student.disciplinary_status %}checked{% endif %} class="form-radio text-gray-400" disabled> ‡πÑ‡∏°‡πà‡∏°‡∏µ
                        </label>
                        <label class="flex items-center gap-2 cursor-not-allowed text-gray-500">
                            <input type="radio" name="disciplinary_status" value="‡∏°‡∏µ" {% if student.disciplinary_status == '‡∏°‡∏µ' %}checked{% endif %} class="form-radio text-gray-400" disabled> ‡∏°‡∏µ
                        </label>
                    </div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                <h3 class="text-lg font-bold mb-4 text-blue-900 border-b border-blue-50 pb-2">3. ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ / ‡∏Å‡∏¢‡∏®.</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏Å‡∏π‡πâ‡∏¢‡∏∑‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô ‡∏Å‡∏¢‡∏®. ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</label>
                        <div class="flex gap-6">
                            <label class="flex items-center gap-2 cursor-pointer text-gray-600">
                                <input type="radio" name="loan_student_fund" value="TRUE" {% if student.loan_student_fund %}checked{% endif %} class="editable-radio form-radio text-blue-600 focus:ring-blue-500" disabled> ‡∏Å‡∏π‡πâ‡∏¢‡∏∑‡∏°
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer text-gray-600">
                                <input type="radio" name="loan_student_fund" value="FALSE" {% if not student.loan_student_fund %}checked{% endif %} class="editable-radio form-radio text-blue-600 focus:ring-blue-500" disabled> ‡πÑ‡∏°‡πà‡∏Å‡∏π‡πâ‡∏¢‡∏∑‡∏°
                            </label>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏Å‡∏≤‡∏£‡∏Å‡∏π‡πâ‡∏¢‡∏∑‡∏°</label>
                        <div class="flex gap-6">
                            <label class="flex items-center gap-2 cursor-pointer text-gray-600">
                                <input type="radio" name="loan_type" value="‡∏Ñ‡πà‡∏≤‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" {% if student.loan_type == '‡∏Ñ‡πà‡∏≤‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô' %}checked{% endif %} class="editable-radio form-radio text-blue-600 focus:ring-blue-500" disabled> ‡∏Å‡∏π‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡πà‡∏≤‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer text-gray-600">
                                <input type="radio" name="loan_type" value="‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á" {% if student.loan_type == '‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á' %}checked{% endif %} class="editable-radio form-radio text-blue-600 focus:ring-blue-500" disabled> ‡∏Å‡∏π‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏£‡∏≠‡∏á‡∏ä‡∏µ‡∏û
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                <h3 class="text-lg font-bold mb-4 text-blue-900 border-b border-blue-50 pb-2">
                    4. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ
                </h3>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
                    <div class="space-y-3 p-4 bg-sky-50/50 rounded-xl border border-gray-100">
                        <h4 class="font-bold text-blue-800 border-b border-blue-100 pb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏¥‡∏î‡∏≤</h4>
                        <input type="text" name="father_name" value="{{ student.father_name | default('') }}" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                        <input type="text" name="father_job" value="{{ student.father_job | default('') }}" placeholder="‡∏≠‡∏≤‡∏ä‡∏µ‡∏û" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                        <input type="number" name="father_income" value="{{ student.father_income | default('0') }}" placeholder="‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ / ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                        <input type="number" name="inc_father" value="{{ student.inc_father | default('0') }}" placeholder="‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                        <input type="text" name="father_health" value="{{ student.father_health | default('') }}" placeholder="‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                    </div>

                    <div class="space-y-3 p-4 bg-sky-50/50 rounded-xl border border-gray-100">
                        <h4 class="font-bold text-blue-800 border-b border-blue-100 pb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏£‡∏î‡∏≤</h4>
                        <input type="text" name="mother_name" value="{{ student.mother_name | default('') }}" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                        <input type="text" name="mother_job" value="{{ student.mother_job | default('') }}" placeholder="‡∏≠‡∏≤‡∏ä‡∏µ‡∏û" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                        <input type="number" name="mother_income" value="{{ student.mother_income | default('0') }}" placeholder="‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ / ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                        <input type="number" name="inc_mother" value="{{ student.inc_mother | default('0') }}" placeholder="‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                        <input type="text" name="mother_health" value="{{ student.mother_health | default('') }}" placeholder="‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                    </div>
                </div>

                <div class="mt-10 border-t pt-6">
                    <h4 class="font-semibold text-gray-800 mb-4">‡∏™‡∏ñ‡∏≤‡∏ô‡∏†‡∏≤‡∏û‡∏™‡∏°‡∏£‡∏™‡∏ö‡∏¥‡∏î‡∏≤-‡∏°‡∏≤‡∏£‡∏î‡∏≤</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        {% set ps = student.parents_status %} 
                        {% for status in ['‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô','‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà','‡∏´‡∏¢‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏á','‡∏ö‡∏¥‡∏î‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï','‡∏°‡∏≤‡∏£‡∏î‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï','‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï'] %}
                        <label class="flex items-center gap-2 text-gray-600">
                            <input type="radio" name="parents_status" value="{{ status }}" {% if ps == status %}checked{% endif %} class="editable-radio" disabled> {{ status }}
                        </label>
                        {% endfor %}
                    </div>
                </div>

                <div class="mt-10 border-t pt-6">
                    <h4 class="font-semibold mb-4">‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢</h4>
                    {% set ht = student.housing_status %}
                    <div class="space-y-4">
                        <label class="flex items-center gap-2 text-gray-600">
                            <input type="radio" name="housing_status" value="own" {% if student.housing_status == 'own' %}checked{% endif %} onclick="toggleHousing()" class="editable-radio" disabled> ‡∏ö‡πâ‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
                        </label>
                        
                        <label class="flex items-center gap-2 text-gray-600">
                            <input type="radio" name="housing_status" value="rent" {% if student.housing_status == 'rent' %}checked{% endif %} onclick="toggleHousing()" class="editable-radio" disabled> ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏ä‡πà‡∏≤
                        </label>
                        <input type="number" name="rent_amount" id="rentInput" value="{{ student.rent_amount | default('') }}" placeholder="‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏•‡∏∞ (‡∏ö‡∏≤‡∏ó)" class="editable-input mt-2 ml-6 w-full md:w-1/2 px-4 py-2 rounded-xl border bg-gray-50 cursor-not-allowed {% if student.housing_status != 'rent' %}hidden{% endif %}" readonly>
                        
                        <label class="flex items-center gap-2 text-gray-600">
                            <input type="radio" name="housing_status" value="other" {% if ht == 'other' %}checked{% endif %} onclick="toggleHousing()" class="editable-radio" disabled> ‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô
                        </label>
                        <input type="text" name="housing_other" id="otherHousingInput" value="{{ student.housing_other | default('') }}" placeholder="‡∏£‡∏∞‡∏ö‡∏∏" class="editable-input mt-2 ml-6 w-full md:w-1/2 px-4 py-2 rounded-xl border bg-gray-50 cursor-not-allowed {% if student.housing_status != 'other' %}hidden{% endif %}" readonly>
                    </div>
                </div>

                <div class="space-y-4 mt-8 border-t pt-6">
                    <h4 class="font-semibold text-gray-800 mb-4">‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£</h4>   
                    <div class="space-y-4">
                        <label class="flex items-center gap-2 text-gray-600">
                            <input type="radio" name="land_status" value="none" {% if student.land_status == '‡πÑ‡∏°‡πà‡∏°‡∏µ' or student.land_status == 'none' %}checked{% endif %} onclick="toggleAgri()" class="editable-radio" disabled> ‡πÑ‡∏°‡πà‡∏°‡∏µ
                        </label>

                        <label class="flex items-center gap-2 text-gray-600">
                            <input type="radio" name="land_status" value="own" {% if student.land_status == '‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á' or student.land_status == 'own' %}checked{% endif %} onclick="toggleAgri()" class="editable-radio" disabled> ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á
                        </label>
                        <input type="number" name="agri_own_amount" id="agriOwnInput" value="{{ student.agri_own_amount | default('') }}" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡πÑ‡∏£‡πà)" class="editable-input mt-2 ml-6 w-full md:w-1/2 px-4 py-2 rounded-xl bg-gray-50 border cursor-not-allowed" style="display:none;" readonly>

                        <label class="flex items-center gap-2 text-gray-600">
                            <input type="radio" name="land_status" value="rent" {% if student.land_status == '‡πÄ‡∏ä‡πà‡∏≤‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô' or student.land_status == 'rent' %}checked{% endif %} onclick="toggleAgri()" class="editable-radio" disabled> ‡πÄ‡∏ä‡πà‡∏≤‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô
                        </label>
                        <div id="agriRentBox" class="mt-2 ml-6 flex gap-4" style="display:none;">
                            <input type="number" name="agri_rent_amount" value="{{ student.agri_rent_amount | default('') }}" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡πÑ‡∏£‡πà)" class="editable-input px-4 py-2 rounded-xl bg-gray-50 border w-1/2 cursor-not-allowed" readonly>
                            <input type="number" name="agri_rent_cost" value="{{ student.agri_rent_cost | default('') }}" placeholder="‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤ (‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)" class="editable-input px-4 py-2 rounded-xl bg-gray-50 border w-1/2 cursor-not-allowed" readonly>
                        </div>

                        <label class="flex items-center gap-2 text-gray-600">
                            <input type="radio" name="land_status" value="other" {% if student.land_status == '‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô' or student.land_status == 'other' %}checked{% endif %} onclick="toggleAgri()" class="editable-radio" disabled> ‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô
                        </label>
                        <input type="text" name="agri_other_detail" id="agriOtherInput" value="{{ student.agri_other_detail | default('') }}" placeholder="‡∏£‡∏∞‡∏ö‡∏∏" class="editable-input mt-2 ml-6 w-full md:w-1/2 px-4 py-2 rounded-xl bg-gray-50 border cursor-not-allowed" style="display:none;" readonly>
                    </div>
                </div>

                <div class="border-t border-gray-100 pt-6 mt-6">
                    <h4 class="font-bold text-blue-800 mb-3">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏≠‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏∞ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="text" name="guardian_name" value="{{ student.guardian_name | default('') }}" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                        <input type="text" name="guardian_relation" value="{{ student.guardian_relation | default('') }}" placeholder="‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                        <input type="text" name="guardian_job" value="{{ student.guardian_job | default('') }}" placeholder="‡∏≠‡∏≤‡∏ä‡∏µ‡∏û" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                        <input type="number" name="guardian_income" value="{{ student.guardian_income | default('0') }}" placeholder="‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ / ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô" class="editable-input w-full px-3 py-2 rounded-md border-gray-300 bg-gray-50 cursor-not-allowed" readonly>
                    </div>
                </div>

                <h4 class="text-md font-bold text-blue-900 mb-4 mt-10 border-t border-gray-100 pt-8">
    ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á‡∏£‡πà‡∏ß‡∏°‡∏ö‡∏¥‡∏î‡∏≤‡∏°‡∏≤‡∏£‡∏î‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (‡∏£‡∏ß‡∏°‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£)
</h4>

<div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
    
    <div class="overflow-x-auto">
        <table class="w-full text-sm text-left text-gray-600">
            <thead class="text-xs text-blue-900 bg-blue-50 border-b border-blue-100">
                <tr>
                    <th class="px-4 py-3 w-16 text-center">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
                    <th class="px-4 py-3">‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                    <th class="px-4 py-3 w-24 text-center">‡∏≠‡∏≤‡∏¢‡∏∏</th>
                    <th class="px-4 py-3">‡∏≠‡∏≤‡∏ä‡∏µ‡∏û/‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô</th>
                    <th class="px-4 py-3">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô/‡∏™‡∏ñ‡∏≤‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤</th>
                </tr>
            </thead>
            <tbody id="siblingsTableBody">
                <tr id="noSiblingRow">
                    <td colspan="5" class="px-4 py-8 text-center text-gray-400">
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

   <!-- Footer Controls -->
<div class="mt-4 flex justify-end items-center gap-2 border-t pt-4">

    <button type="button" id="addSiblingBtn"
        class="bg-green-100 hover:bg-green-200 text-green-800 px-3 py-2 rounded-lg text-sm font-medium transition-colors hidden">
        + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á
    </button>

    <button type="button" id="prevSiblingBtn"
        class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
        ‚Üê ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
    </button>

    <button type="button" id="nextSiblingBtn"
        class="bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-2 rounded-lg text-sm font-bold transition-colors">
        ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí
    </button>

</div>
    </div>

</div>

                </div>

            </div>

            <div class="flex flex-col items-center gap-4 pt-6 pb-12">
                <button type="button" id="editBtn" class="bg-yellow-400 hover:bg-yellow-500 text-blue-900 font-bold py-3 px-12 rounded-full shadow-md transition-all flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                    </svg>
                    ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß
                </button>

                <button type="submit" id="saveBtn" disabled class="bg-blue-900 text-white font-bold py-3 px-20 rounded-full shadow-lg transition-all text-lg opacity-50 cursor-not-allowed">
                    üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
                </button>
                
                <p id="editHint" class="text-sm text-gray-500 italic">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß" ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
            </div>

        </form>
    </div>
</div>

<script>
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢
function toggleHousing() {
    const status = document.querySelector('input[name="housing_status"]:checked')?.value;
    const rentInput = document.getElementById("rentInput");
    const otherInput = document.getElementById("otherHousingInput");

    if (rentInput) rentInput.classList.toggle('hidden', status !== 'rent');
    if (otherInput) otherInput.classList.toggle('hidden', status !== 'other');
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô‡πÄ‡∏Å‡∏©‡∏ï‡∏£
function toggleAgri() {
    const status = document.querySelector('input[name="land_status"]:checked')?.value;
    const ownInput = document.getElementById("agriOwnInput");
    const rentBox = document.getElementById("agriRentBox");
    const otherInput = document.getElementById("agriOtherInput");

    if(ownInput) ownInput.style.display = (status === 'own') ? 'block' : 'none';
    if(rentBox) rentBox.style.display = (status === 'rent') ? 'flex' : 'none';
    if(otherInput) otherInput.style.display = (status === 'other') ? 'block' : 'none';
}

// ‡∏£‡∏±‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à
document.addEventListener('DOMContentLoaded', () => {
    toggleHousing();
    toggleAgri();
});

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
const editBtn = document.getElementById('editBtn');
const saveBtn = document.getElementById('saveBtn');

editBtn.addEventListener('click', () => {
    // 1. ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Text/Number inputs ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏•‡∏≤‡∏™ .editable-input
    document.querySelectorAll('.editable-input').forEach(el => {
        el.removeAttribute('readonly');
        el.classList.remove('bg-gray-50', 'cursor-not-allowed');
        el.classList.add('bg-white', 'border-blue-400', 'ring-2', 'ring-blue-50');
    });

    // 2. ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Radio buttons ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏•‡∏≤‡∏™ .editable-radio
    document.querySelectorAll('.editable-radio').forEach(radio => {
        radio.removeAttribute('disabled');
        radio.classList.remove('cursor-not-allowed');
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß (‡∏•‡∏ö opacity ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏µ‡πÄ‡∏ó‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
    });

    // 3. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏∏‡πà‡∏°
    saveBtn.disabled = false;
    saveBtn.classList.remove('opacity-50', 'cursor-not-allowed');
    saveBtn.classList.add('hover:bg-blue-800', 'shadow-xl');
    editBtn.classList.add('hidden');
    
    document.getElementById('editHint').innerText = "üîì ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö";
});

let siblings = [];
let currentPage = 0;
const rowsPerPage = 3;

const tableBody = document.getElementById("siblingsTableBody");
const noSiblingRow = document.getElementById("noSiblingRow");
const addBtn = document.getElementById("addSiblingBtn");
const prevBtn = document.getElementById("prevSiblingBtn");
const nextBtn = document.getElementById("nextSiblingBtn");

// ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤
function renderSiblings() {
    tableBody.innerHTML = "";

    if (siblings.length === 0) {
        tableBody.innerHTML = `
            <tr>
                <td colspan="5" class="px-4 py-6 text-center text-gray-400">
                    ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á
                </td>
            </tr>
        `;
        return;
    }

    const start = currentPage * rowsPerPage;
    const end = start + rowsPerPage;
    const pageData = siblings.slice(start, end);

    pageData.forEach((s, index) => {
        tableBody.innerHTML += `
            <tr class="border-b">
                <td class="px-4 py-2">${start + index + 1}</td>
                <td class="px-4 py-2">
                    <input type="text" name="sibling_name[]" value="${s.name}" 
                    class="editable-input w-full border rounded px-2 py-1">
                </td>
                <td class="px-4 py-2">
                    <input type="number" name="sibling_age[]" value="${s.age}" 
                    class="editable-input w-full border rounded px-2 py-1">
                </td>
                <td class="px-4 py-2">
                    <input type="text" name="sibling_job[]" value="${s.job}" 
                    class="editable-input w-full border rounded px-2 py-1">
                </td>
                <td class="px-4 py-2">
                    <input type="text" name="sibling_place[]" value="${s.place}" 
                    class="editable-input w-full border rounded px-2 py-1">
                </td>
            </tr>
        `;
    });
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á
addBtn.addEventListener("click", () => {
    siblings.push({ name: "", age: "", job: "", place: "" });
    currentPage = Math.floor((siblings.length - 1) / rowsPerPage);
    renderSiblings();
});

// Pagination
prevBtn.addEventListener("click", () => {
    if (currentPage > 0) {
        currentPage--;
        renderSiblings();
    }
});

nextBtn.addEventListener("click", () => {
    if ((currentPage + 1) * rowsPerPage < siblings.length) {
        currentPage++;
        renderSiblings();
    }
});

// ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
editBtn.addEventListener("click", () => {
    addBtn.classList.remove("hidden");
});

// ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
renderSiblings();
</script>
{% endblock %}